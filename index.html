<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- Include the CesiumJS JavaScript and CSS files -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.107/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.107/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
  <div id="cesiumContainer"></div>
  <script type="module">
    // Your access token can be found at: https://ion.cesium.com/tokens.
    // Replace `your_access_token` with your Cesium ion access token.

    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxNGIxYmY0Zi1iYTgwLTRmYzctODUwNS00MDZiYzg0ZWU4ODAiLCJpZCI6MTM5NzE4LCJpYXQiOjE2ODQ0MjE3Nzl9.nk8yr8PVm-ZluXohTmPDAnyno5gJZXuhTBrO52ji8Bs';

    const viewer = new Cesium.Viewer("cesiumContainer", {
        terrain: Cesium.Terrain.fromWorldTerrain(),
    });
    var camera = viewer.scene.camera;


    var positions = [[-119.46017935003843, 25.208735126574357, 418542.34669284325], [-119.41549068341718, 25.161443777083036, 418536.5781245625], [-119.37083962412008, 25.11413605108647, 418530.8255502005], [-119.32622607553115, 25.06681199559804, 418525.0890211493], [-119.28164994115684, 25.019471657534275, 418519.3685887274], [-119.23711112462065, 24.97211508371635, 418513.6643041901], [-119.19260952967174, 24.924742320870006, 418507.97621871583], [-119.1481450601745, 24.877353415625944, 418502.3043834506], [-119.10371762012464, 24.8299484145202, 418496.6488494187], [-119.05932711362726, 24.782527363994063, 418491.0096676342], [-119.01497344491457, 24.735090310394426, 418485.386889005], [-118.97065651833803, 24.68763729997528, 418479.78056439414], [-118.92637623837184, 24.640168378895897, 418474.19074458064], [-118.8821325096123, 24.592683593222553, 418468.61748028564], [-118.8379252367687, 24.545182988928367, 418463.0608221534], [-118.79375432468025, 24.497666611893823, 418457.5208207784], [-118.74961967830014, 24.450134507906828, 418451.99752665876], [-118.70552120270675, 24.4025867226626, 418446.4909902481], [-118.66145880309745, 24.355023301765552, 418441.0012619139], [-118.61743238478368, 24.307444290727464, 418435.5283919607], [-118.57344185320923, 24.259849734969013, 418430.0724306231], [-118.52948711392752, 24.212239679819817, 418424.63342805975], [-118.48556807261856, 24.16461417051852, 418419.2114343674], [-118.44168463507738, 24.11697325221357, 418413.80649956776], [-118.39783670722332, 24.06931696996244, 418408.4186736147], [-118.35402419509165, 24.021645368733825, 418403.04800637683], [-118.31024700484141, 23.973958493405735, 418397.69454766915], [-118.26650504274637, 23.926256388767005, 418392.3583472164], [-118.22279821520497, 23.878539099517436, 418387.0394546926], [-118.17912642873402, 23.83080667026798, 418381.7379196826], [-118.13548958996122, 23.783059145540797, 418376.45379170333], [-118.09188760564335, 23.735296569769993, 418371.1871201946], [-118.04832038265798, 23.68751898730149, 418365.93795453146], [-118.00478782799162, 23.6397264423931, 418360.7063440058], [-117.96128984875563, 23.59191897921623, 418355.4923378395], [-117.9178263521814, 23.544096641854114, 418350.2959851795], [-117.87439724561456, 23.496259474303223, 418345.11733510176], [-117.83100243652396, 23.448407520473562, 418339.956436596], [-117.78764183249342, 23.400540824188596, 418334.81333859835], [-117.74431534122455, 23.352659429185643, 418329.6880899466], [-117.70102287054115, 23.304763379116178, 418324.58073940425], [-117.65776432838038, 23.256852717546632, 418319.49133568053], [-117.61453962280167, 23.20892748795748, 418314.4199273829], [-117.57134866197745, 23.160987733744268, 418309.3665630593], [-117.52819135420296, 23.11303349821798, 418304.3312911722], [-117.48506760788688, 23.065064824605106, 418299.3141601104], [-117.44197733155637, 23.017081756047343, 418294.3152181814], [-117.39892043385416, 22.96908433560369, 418289.3345136168], [-117.3558968235481, 22.921072606248252, 418284.37209457805], [-117.31290640951298, 22.873046610872304, 418279.4280091265], [-117.26994910074069, 22.825006392283736, 418274.5023052736], [-117.22702480635104, 22.776951993207724, 418269.59503092355], [-117.18413343556767, 22.72888345628673, 418264.7062339286], [-117.14127489773699, 22.680800824080777, 418259.835962042], [-117.0984491023191, 22.632704139068032, 418254.9842629416], [-117.05565595889367, 22.584593443644344, 418250.1511842336], [-117.01289537715229, 22.536468780125045, 418245.33677342464], [-116.97016726690633, 22.488330190743188, 418240.54107796063], [-116.92747153807943, 22.44017771765106, 418235.7641452034], [-116.88480810071066, 22.39201140292023, 418231.00602242746], [-116.84217686495822, 22.343831288541896, 418226.2667568232], [-116.79957774109172, 22.295637416426786, 418221.5463955052], [-116.75701063949555, 22.24742982840538, 418216.8449855097], [-116.71447547067204, 22.199208566229455, 418212.16257378185], [-116.67197214524043, 22.150973671570416, 418207.49920718465], [-116.62950057392176, 22.102725186020656, 418202.8549325111], [-116.58706066756913, 22.05446315109365, 418198.2297964541], [-116.54465233713356, 22.006187608224234, 418193.6238456352], [-116.50227549369373, 21.957898598768548, 418189.03712658805], [-116.45993004843575, 21.909596164005723, 418184.469685757], [-116.41761591265339, 21.861280345134816, 418179.92156951944], [-116.37533299776912, 21.812951183279466, 418175.39282414445], [-116.33308121530176, 21.76460871948449, 418170.883495835], [-116.29086047689958, 21.716252994718154, 418166.393630706], [-116.24867069430789, 21.66788404987163, 418161.9232747711], [-116.20651177940069, 21.619501925759465, 418157.47247398074], [-116.164383644149, 21.57110666311993, 418153.04127418844], [-116.12228620065304, 21.52269830261513, 418148.6297211644], [-116.08021936110734, 21.47427688483094, 418144.2378605907], [-116.03818303783046, 21.42584245027853, 418139.8657380661], [-115.99617714325619, 21.377395039392837, 418135.5133990862], [-115.9542015899151, 21.328934692534048, 418131.1808890888], [-115.91225629046335, 21.280461449987428, 418126.86825340404], [-115.87034115765807, 21.231975351963506, 418122.5755372792], [-115.82845610438274, 21.18347643859819, 418118.30278586806], [-115.78660104361273, 21.1349647499547, 418114.05004424753], [-115.7447758884473, 21.08644032602008, 418109.8173573972], [-115.70298055209102, 21.03790320670987, 418105.60477021534], [-115.66121494786249, 20.98935343186516, 418101.4123274971], [-115.61947898918733, 20.940791041254013, 418097.24007396854], [-115.57777258960093, 20.89221607457187, 418093.08805424836], [-115.53609566275273, 20.843628571441254, 418088.95631287503], [-115.49444812239607, 20.79502857141224, 418084.8448943011], [-115.45282988240012, 20.746416113963726, 418080.7538428693], [-115.41124085673712, 20.697791238501544, 418076.6832028558], [-115.3696809594938, 20.649153984360407, 418072.6330184301], [-115.32815010486203, 20.600504390803618, 418068.60333367967], [-115.28664820714478, 20.551842497023078, 418064.59419258457], [-115.24517518074718, 20.503168342140135, 418060.6056390659], [-115.20373094019551, 20.45448196520518, 418056.6377169071], [-115.16231540011096, 20.405783405198026, 418052.6904698509], [-115.12092847522854, 20.357072701029168, 418048.7639415074], [-115.07957008039266, 20.308349891538292, 418044.85817540134], [-115.03824013054903, 20.259615015495537, 418040.9732149806], [-114.99693854076108, 20.2108681116018, 418037.10910359776], [-114.95566522618472, 20.162109218488574, 418033.26588448556], [-114.91442010209823, 20.113338374718023, 418029.44360082323], [-114.8732030838722, 20.064555618785143, 418025.6422956592], [-114.83201408699672, 20.01576098911381, 418021.862011971], [-114.79085302705754, 19.966954524062015, 418018.10279262747], [-114.74971981975038, 19.918136261918644, 418014.36468041956], [-114.70861438087937, 19.869306240904752, 418010.64771802974], [-114.66753662635062, 19.82046449917415, 418006.95194804115], [-114.62648647217532, 19.771611074813006, 418003.27741296793], [-114.58546383447124, 19.722746005840715, 417999.6241551874], [-114.54446862946745, 19.6738693302097, 417995.9922170161], [-114.50350077348331, 19.624981085805356, 417992.38164066814], [-114.46256018295492, 19.576081310447712, 417988.79246823693], [-114.421646774413, 19.52717004188987, 417985.22474174714], [-114.38076046450537, 19.478247317819108, 417981.6785031158], [-114.33990116997079, 19.42931317585709, 417978.1537941657], [-114.29906880765645, 19.380367653559986, 417974.65065661434], [-114.25826329451579, 19.33141078841855, 417971.1691320918], [-114.21748454760072, 19.28244261785941, 417967.7092621179], [-114.17673248407043, 19.233463179243486, 417964.2710881313], [-114.13600702118181, 19.184472509867547, 417960.854651455], [-114.09530807629963, 19.135470646964, 417957.4599933259], [-114.05463556688427, 19.086457627701208, 417954.0871548734], [-114.01398941050951, 19.037433489183403, 417950.73617713177], [-113.97336952483533, 18.988398268452514, 417947.40710103675], [-113.93277582763385, 18.9393520024846, 417944.09996742377], [-113.89220823677984, 18.890294728195293, 417940.81481702195], [-113.85166667023974, 18.841226482435513, 417937.5516904731], [-113.81115104609036, 18.792147301994124, 417934.3106283085], [-113.77066128250134, 18.74305722359735, 417931.0916709603], [-113.73019729775325, 18.693956283909213, 417927.8948587641], [-113.68975901021375, 18.644844519531848, 417924.72023195017], [-113.64934633836074, 18.595721967005375, 417921.5678306424], [-113.60895920076774, 18.546588662808094, 417918.4376948733], [-113.5685975161034, 18.49744464335796, 417915.3298645793], [-113.52826120314639, 18.44828994501082, 417912.244379573], [-113.48795018076432, 18.399124604061917, 417909.1812795778], [-113.44766436792997, 18.34994865674583, 417906.1406042187], [-113.40740368370949, 18.30076213923665, 417903.1223930094], [-113.36716804727223, 18.251565087647894, 417900.12668536004], [-113.32695737788158, 18.20235753803447, 417897.1535205886], [-113.28677159490199, 18.153139526389175, 417894.2029379024], [-113.2466106177945, 18.103911088647262, 417891.2749763914], [-113.2064743661142, 18.054672260683777, 417888.3696750694], [-113.16636275951595, 18.00542307831444, 417885.4870728235], [-113.1262757177512, 17.956163577296234, 417882.6272084445], [-113.08621316067547, 17.906893793328393, 417879.79012062383], [-113.04617500822333, 17.85761376204945, 417876.9758479415], [-113.00616118044192, 17.808323519042442, 417874.18442886585], [-112.9661715974641, 17.759023099829495, 417871.4159017722], [-112.92620617952554, 17.70971253987735, 417868.67030492815], [-112.88626484695128, 17.660391874593884, 417865.9476764859], [-112.84634752016652, 17.611061139329767, 417863.2480545004], [-112.80645411968776, 17.561720369378534, 417860.571476925], [-112.76658456612604, 17.51236959997663, 417857.9179815855], [-112.7267387801904, 17.463008866303635, 417855.28760622645], [-112.68691668268025, 17.41363820348383, 417852.68038847303], [-112.6471181944915, 17.364257646582733, 417850.0963658407], [-112.60734323661246, 17.314867230612194, 417847.53557573963], [-112.56759173012466, 17.265466990526726, 417844.9980554826], [-112.52786359620058, 17.216056961225682, 417842.4838422486], [-112.48815875611426, 17.16663717755232, 417839.99297313555], [-112.44847713122097, 17.117207674296218, 417837.5254851278], [-112.4088186429763, 17.067768486189372, 417835.0814150901], [-112.3691832129262, 17.018319647911348, 417832.66079978074], [-112.32957076270263, 16.968861194085715, 417830.2636758567], [-112.2899812140419, 16.91939315928206, 417827.8900798624], [-112.25041448875655, 16.869915578015608, 417825.54004822654], [-112.21087050876558, 16.8204284847476, 417823.21361728286], [-112.17134919606313, 16.770931913885164, 417820.91082323506], [-112.13185047274969, 16.721425899783252, 417818.6317021887], [-112.09237426100316, 16.671910476740834, 417816.3762901478], [-112.05292048310059, 16.622385679006346, 417814.14462298766], [-112.01348906140626, 16.57285154077376, 417811.9367364804], [-111.97407991836789, 16.523308096184547, 417809.7526662915], [-111.9346929765292, 16.473755379327837, 417807.5924479637], [-111.89532815852273, 16.42419342424014, 417805.45611693966], [-111.85598538706988, 16.374622264905653, 417803.3437085493], [-111.81666458497912, 16.325041935257946, 417801.255258009], [-111.77736567514769, 16.275452469176393, 417799.1908004126], [-111.73808858055696, 16.22585390049133, 417797.1503707577], [-111.69883322428723, 16.176246262980264, 417795.1340039189], [-111.65959952949177, 16.126629590370094, 417793.1417346637], [-111.62038741942459, 16.07700391633616, 417791.17359764996], [-111.5811968174206, 16.027369274504718, 417789.2296274018], [-111.54202764689524, 15.977725698448905, 417787.3098583551], [-111.5028798313658, 15.928073221694078, 417785.41432482505], [-111.46375329441895, 15.878411877713994, 417783.5430610022], [-111.42464795974308, 15.828741699932825, 417781.6961009728], [-111.38556375109728, 15.779062721725172, 417779.87347871147], [-111.34650059234116, 15.729374976415883, 417778.0752280661], [-111.30745840740444, 15.679678497280632, 417776.3013827833], [-111.26843712031703, 15.629973317545817, 417774.5519764859], [-111.22943665518171, 15.580259470388718, 417772.8270426883], [-111.1904569361883, 15.530536988938914, 417771.12661478436], [-111.1514978876143, 15.480805906276226, 417769.45072604826], [-111.11255943381842, 15.431066255432683, 417767.7994096497], [-111.07364149925017, 15.381318069392085, 417766.17269864486], [-111.03474400842728, 15.331561381090298, 417764.57062594715], [-110.99586688596463, 15.281796223415068, 417762.99322439166], [-110.95701005655307, 15.232022629208016, 417761.44052666065], [-110.91817344496947, 15.182240631261015, 417759.9125653521], [-110.87935697606954, 15.132450262320907, 417758.4093729262], [-110.84056057479584, 15.08265155508675, 417756.9309817295], [-110.80178416616843, 15.032844542210523, 417755.4774239932], [-110.76302767528898, 14.983029256297725, 417754.0487318336], [-110.72429102734557, 14.933205729908726, 417752.64493724465], [-110.68557414759985, 14.88337399555525, 417751.2660721047], [-110.64687696140193, 14.833534085705699, 417749.91216817434], [-110.60819939417618, 14.783686032780103, 417748.58325709566], [-110.56954137143188, 14.73382986915509, 417747.2793703882], [-110.53090281875055, 14.683965627160573, 417746.0005394699], [-110.49228366180411, 14.634093339081575, 417744.74679560977], [-110.45368382634143, 14.584213037158113, 417743.5181699746], [-110.41510323818, 14.534324753585215, 417742.31469362456], [-110.37654182322902, 14.484428520512953, 417741.13639747485], [-110.33799950746972, 14.434524370048377, 417739.98331234144], [-110.29947621696475, 14.384612334251646, 417738.85546890437], [-110.26097187785065, 14.334692445141473, 417737.75289773825], [-110.22248641635076, 14.284764734691196, 417736.67562928505], [-110.18401975875217, 14.234829234830583, 417735.62369387597], [-110.14557183143434, 14.184885977445742, 417734.5971217178], [-110.10714256083975, 14.134934994380746, 417733.5959428955], [-110.06873187350078, 14.084976317434034, 417732.6201873684], [-110.03033969601572, 14.035009978363613, 417731.6698849834], [-109.99196595506412, 13.985036008883174, 417730.7450654634], [-109.95361057739933, 13.935054440664182, 417729.84575840906], [-109.91527348985264, 13.885065305335313, 417728.9719932931], [-109.87695461933359, 13.835068634484664, 417728.1237994827], [-109.83865389281632, 13.78506445965534, 417727.30120619736], [-109.8003712373619, 13.735052812351775, 417726.50424256094], [-109.76210658009703, 13.685033724033815, 417725.7329375576], [-109.72385984823012, 13.635007226122562, 417724.98732005496], [-109.68563096903777, 13.584973349995083, 417724.26741879684], [-109.64741986987208, 13.534932126989656, 417723.5732624025], [-109.60922647816153, 13.484883588402193, 417722.9048793754], [-109.57105072140565, 13.434827765488336, 417722.26229808055], [-109.53289252717407, 13.384764689462758, 417721.6455467669], [-109.49475182311278, 13.3346943915009, 417721.0546535661], [-109.45662853694094, 13.284616902735811, 417720.48964648513], [-109.41852259644669, 13.234532254262865, 417719.95055339404], [-109.38043392949534, 13.184440477136114, 417719.43740204826], [-109.34236246401264, 13.134341602370249, 417718.9502200817], [-109.30430812801336, 13.084235660940243, 417718.48903499235], [-109.26627084956776, 13.034122683783007, 417718.05387416173], [-109.22825055682284, 12.984002701793955, 417717.6447648485], [-109.19024717799674, 12.933875745831957, 417717.2617341737], [-109.15226064137403, 12.88374184671561, 417716.9048091477], [-109.11429087531887, 12.833601035225346, 417716.57401664817], [-109.07633780825219, 12.783453342103229, 417716.26938342594], [-109.03840136867474, 12.733298798052889, 417715.99093610933], [-109.00048148514978, 12.683137433740026, 417715.73870119586], [-108.96257808631502, 12.632969279792333, 417715.5127050633], [-108.92469110087374, 12.582794366799513, 417715.3129739608], [-108.88682045759361, 12.53261272531503, 417715.1395339997], [-108.84896608532013, 12.4824243858526, 417714.9924111868], [-108.81112791295827, 12.432229378891268, 417714.871631382], [-108.77330586948581, 12.382027734871444, 417714.7772203193], [-108.73549988394292, 12.33181948419718, 417714.7092036307], [-108.69770988544192, 12.281604657235539, 417714.6676067825], [-108.65993580315767, 12.231383284318296, 417714.65245514316], [-108.6221775663372, 12.181155395738745, 417714.6637739418], [-108.58443510428303, 12.130921021756182, 417714.7015882751], [-108.54670834637265, 12.080680192592716, 417714.7659231229], [-108.50899722205345, 12.03043293843495, 417714.85680332733], [-108.47130166082242, 11.980179289433497, 417714.9742536059], [-108.4336215922568, 11.929919275704778, 417715.1182985451], [-108.39595694598934, 11.879652927327808, 417715.28896261094], [-108.35830765172419, 11.829380274348548, 417715.48627013055], [-108.32067363922367, 11.779101346776972, 417715.7102453055], [-108.2830548383194, 11.72881617458829, 417715.96091220726], [-108.24545117890186, 11.678524787723363, 417716.2382947809], [-108.20786259092974, 11.628227216088503, 417716.54241683753], [-108.17028900442146, 11.577923489555763, 417716.87330206257], [-108.13273034945838, 11.527613637963148, 417717.23097401275], [-108.09518655618766, 11.477297691114336, 417717.61545611196], [-108.05765755481653, 11.426975678780645, 417718.0267716442], [-108.0201432756123, 11.376647630697478, 417718.46494377794], [-107.98264364890858, 11.326313576569197, 417718.9299955509], [-107.9451586050992, 11.275973546065346, 417719.42194986175], [-107.90768807463732, 11.22562756882294, 417719.94082948065], [-107.87023198803813, 11.175275674445809, 417720.4866570509], [-107.83279027587714, 11.124917892506163, 417721.05945507705], [-107.79536286879232, 11.07455425254133, 417721.65924594284], [-107.75794969748141, 11.024184784058702, 417722.2860518902], [-107.72055069269555, 10.97380951653208, 417722.93989503226], [-107.68316578525868, 10.923428479403379, 417723.62079735554], [-107.64579490603865, 10.873041702082366, 417724.3287807117], [-107.6084379859787, 10.822649213948337, 417725.06386681745], [-107.57109495606342, 10.772251044346644, 417725.82607727416], [-107.53376574735293, 10.721847222594185, 417726.6154335106], [-107.49645029095224, 10.6714377779735, 417727.4319568676], [-107.45914851803626, 10.621022739739, 417728.27566852665], [-107.42186035982222, 10.570602137111337, 417729.1465895528], [-107.38458574759719, 10.52017599928297, 417730.04474086]];

    /*camera.setView({
        destination: Cesium.Cartesian3.fromDegrees(positions[0][0], positions[0][1], positions[0][2]), // your own position
        });  
    */
    camera.position = new Cesium.Cartesian3(0.25, 0.0, 0.0);
    camera.direction = new Cesium.Cartesian3(0.0, 1.0, -0.5);



    const timeStepInSeconds = 1;
    const totalSeconds = timeStepInSeconds * (positions.length - 1);
    const start = Cesium.JulianDate.fromIso8601("2020-03-09T23:10:00Z");
    const stop = Cesium.JulianDate.addSeconds(start, totalSeconds, new Cesium.JulianDate());
    viewer.clock.startTime = start.clone();
    viewer.clock.stopTime = stop.clone();
    viewer.clock.currentTime = start.clone();
    viewer.timeline.zoomTo(start, stop);
    viewer.clock.multiplier = 5;
    viewer.clock.shouldAnimate = true;

    const positionProperty = new Cesium.SampledPositionProperty();

    for (let i = 0; i < positions.length; i++) {
      const dataPoint = positions[i];
      const time = Cesium.JulianDate.addSeconds(start, i * timeStepInSeconds, new Cesium.JulianDate());
      const position = Cesium.Cartesian3.fromDegrees(dataPoint[0], dataPoint[1], dataPoint[2]);
      positionProperty.addSample(time, position);
  
      viewer.entities.add({
        position: position,
        point: { pixelSize: 10, color: Cesium.Color.RED }
      });
    }

    const satelliteEntity = viewer.entities.add({
      availability: new Cesium.TimeIntervalCollection([ new Cesium.TimeInterval({ start: start, stop: stop }) ]),
      position: positionProperty,
      point: {pixelSize: 30, color: Cesium.Color.GREEN },
      path: new Cesium.PathGraphics({ width: 3})
    });

    viewer.scene.postUpdate.addEventListener(function (scene,time) {
      var position = satelliteEntity.position.getValue(time);
      if(!Cesium.defined(position)) {
        return;
      }
      var transform = Cesium.Transforms.eastNorthUpToFixedFrame(position);

      var offset = Cesium.Cartesian3.clone(camera.position);
      var direction = Cesium.Cartesian3.clone(camera.direction);
      var up = Cesium.Cartesian3.clone(camera.up);
  
      camera.lookAtTransform(transform);
  
      Cesium.Cartesian3.clone(offset, camera.position);
      Cesium.Cartesian3.clone(direction, camera.direction);
      Cesium.Cartesian3.clone(up, camera.up);
      Cesium.Cartesian3.cross(direction, up, camera.right);
    });

    /*var targetResolutionScale = 1.0;
    var timeout = 10000;
    var scene = viewer.scene;
    if(!scene){
      console.error("No scene");
                    }
    var prepareScreenshot = function(){
      var canvas = scene.canvas;
      viewer.resolutionScale = targetResolutionScale;
      scene.preRender.removeEventListener(prepareScreenshot);
      setTimeout(function(){
        scene.postRender.addEventListener(takeScreenshot);
      }, timeout);
    };

    var takeScreenshot = function(){
      scene.postRender.removeEventListener(takeScreenshot);
      var canvas = scene.canvas;
      canvas.toBlob(function(blob){
        var url = URL.createObjectURL(blob);
        downloadURL(url, "snapshot-" + targetResolutionScale.toString() + 'x.png');
        viewer.resolutionScale = 1.0;
      });
    };

    scene.preRender.addEventListener(prepareScreenshot);
    function downloadURL(url,name){
      var link = document.createElement('a');
      link.download = name;
      link.href = url;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }*/

  </script>
 </div>
</body>
</html>
